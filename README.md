## Anime Timeline

Interactive timelines for manga/anime series with per-title layouts, images,
wiki links, and helper tools (calendar view, capture to image, etc.).

Live version: https://zohnannor.github.io/anime-timeline/

### Usage

- Select a manga/anime title using the series picker button.
- Scroll horizontally with the mouse wheel, trackpad, touch swipe, or the bottom
  scroller.
- Open helper tools (calendar, info, capture) with the floating buttons. See the
  info box for more details.
- Use the capture option to export the entire timeline as a PNG image.

### Running the project

Install dependencies

```bash
yarn
```

Generate optimized images

```bash
python ci/optimize-images.py --all
```

Start the dev server

```bash
yarn dev
```

The app will be available on <http://localhost:3000> by default.

Create a production build

```bash
yarn build
```

The static build will be written to the `build` directory.

### Image optimization

Timeline artwork lives under `public/<title>` (for example, `public/csm`,
`public/berserk`, etc.). Optimized WebP and thumbnails are generated by
[`ci/optimize-images.py`](ci/optimize-images.py).

<details><summary>

See its `--help` for more details.

</summary>

```bash
usage: optimize-images.py [-h] [--force] [--all] [--cpu CPU] [--color {auto,always,never}] [TITLE]

Optimize manga/anime images

positional arguments:
  TITLE                 Manga/Anime title

options:
  -h, --help            show this help message and exit
  --force               Force reprocessing of all images (default: false)
  --all                 Process all anime titles (default: false)
  --cpu CPU             Number of parallel processes (default: number of CPUs)
  --color {auto,always,never}
                        Control color output (auto, always, never). This program respects the NO_COLOR environment variable. (default: auto)
```

</details>

Requirements:

- [Python 3](https://www.python.org/downloads/)
- [ImageMagick](https://imagemagick.org/script/download.php) (`magick` on PATH)
- [`cwebp`](https://developers.google.com/speed/webp/docs/cwebp) (from
  `libwebp`/`webp` tools)

On Arch Linux, install `imagemagick` and `libwebp-utils` packages.

### Contributing

- Development
    - Use `yarn` rather than `npm` for installing and running scripts (see
      [`package.json`](package.json)).
    - **To add a timeline for a new title**, see how other titles are described
      in [`src/constants.ts`](src/constants.ts). Use one of the existing titles
      (e.g. [`src/timelines/csm.ts`](src/timelines/csm.ts)) as a template.
    - For wiki links, use a well-maintained wiki that's recognized by the
      community as the "official" one. Refer to [Wiki Buddy's list of
      wikis](https://getindie.wiki/listings/) if unsure.
    - If you add or change images in `public/<title>`, run
      `python ci/optimize-images.py <title>` and commit the resulting optimized
      images.

- Structure
    - Timelines and data live under [`src/timelines`](src/timelines).
    - UI pieces live under [`src/components`](src/components).
    - Shared state/settings live under [`src/providers`](src/providers).
    - Hooks live under [`src/hooks`](src/hooks).

- Changes
    - Keep pull requests focused and describe what/why.
    - Call out any new tools, dependencies, or scripts.
    - Use prettier for formatting (`yarn fmt`).

### License

This project is licensed under the MIT License. See the [`LICENSE`](./LICENSE) file for details.
